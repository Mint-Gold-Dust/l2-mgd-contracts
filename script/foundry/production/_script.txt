# 1.- run the script-01 on Mainnet: deploy implementations
forge script --via-ir --rpc-url $RPC_MAINNET --private-key $PKEY --slow --verify --etherscan-api-key $KEY_ETHERSCAN_MAINNET --broadcast script/foundry/production/01_GlobalDeployerScript.s.sol

== Logs with Deployer: 0x00e5BF77D3466fAB615F9E1604C69F2588a78Cd0  ==

  Deploying MgdCompanyL2Sync...
  MgdCompanyL2Sync implementation: 0xb7c8621F063C6b1A55cCD53eF13E01B76705afD1
  Deploying MgdERC721PermitEscrowable...
  MgdERC721PermitEscrowable implementation: 0x555a032651aFA84bB7E3e72CDC38AAa9440CA819
  Deploying MgdERC1155PermitEscrowable...
  MgdERC1155PermitEscrowable implementation: 0x02CAA34bdE04821FF7F491E5B155685E4eacEB6F
  Deploying MintGoldDustSetPrice...
  MintGoldDustSetPrice implementation: 0x9c70E7353cB03E776237CA682AF8765979A32F8E
  Deploying MintGoldDustMarketplaceAuction...
  MintGoldDustMarketplaceAuction implementation: 0x329D0Bf16abE96298CA6e1d3e8914D3aD7722592

# 2.- Via Safe Tx, upgrade the applicable contracts using json script on MAINNET.
 - upgrade company contract
 - upgrade 721 contract
 - upgrade 1155 contract
 - upgrade auction contract
 - ugprade setPrice contract
 - set messenger address on upgraded company contract

 https://etherscan.io/tx/0xf4f043038051fb8857eb46e59731629d98cc6d96899e962c095cfe2d6e3bb2b4#eventlog

# 3.- run the script-02 on Mainnet: deploy the escrow contract that needs mainnet contracts upgraded
forge script --via-ir --rpc-url $RPC_MAINNET --private-key $PKEY --slow --verify --etherscan-api-key $KEY_ETHERSCAN_MAINNET --broadcast script/foundry/production/02_GlobalDeployerScript.s.sol

== Logs with Deployer: 0x00e5BF77D3466fAB615F9E1604C69F2588a78Cd ==
  Deploying MgdL2NFTEscrow...
  MgdL2NFTEscrow implementation: 0xcAE7BD28c72802a82f2A74d73134051C9Ee1747B
  TransparentUpgradeableProxy constructor arguments:
  0x000000000000000000000000cae7bd28c72802a82f2a74d73134051c9ee1747b00000000000000000000000053e3a7ece7555c5bc69afbd8df8df7b056339ab000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000024c4d66de80000000000000000000000002f00435f003d6568933586b4a272c6c6b481e0

# 4.- run the script-03 on Base: with contracts upgraded on mainnet we can deploy on Base
forge script --via-ir --rpc-url $RPC_BASE --private-key $PKEY --slow --verify --etherscan-api-key $KEY_ETHERSCAN_BASE --broadcast script/foundry/production/03_GlobalDeployerScript.s.sol

== Logs with Deployer: 0x00e5BF77D3466fAB615F9E1604C69F2588a78Cd ==
  Deploying MgdCompanyL2Sync...
  MgdCompanyL2Sync implementation: 0x5b1F035a5b9290702ba9066d33dE33f0187a2ca3
  TransparentUpgradeableProxy constructor arguments:
  0x0000000000000000000000005b1f035a5b9290702ba9066d33de33f0187a2ca3000000000000000000000000644b8d2a093e997a6482b5ca2208124b067f1a8f000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000e48142951a00000000000000000000000000e5bf77d3466fab615f9e1604c69f2588a78cd0000000000000000000000000000000000000000000000000d02ab486cedc00000000000000000000000000000000000000000000000000004563918244f4000000000000000000000000000000000000000000000000000029a2241af62c0000000000000000000000000000000000000000000000000001158e460913d000000000000000000000000000000000000000000000000000000000000000015180000000000000000000000000000000000000000000000000000000000000012c00000000000000000000000000000000000000000000000000000000
  TransparentUpgradeableProxy deployed: 0x644B8d2A093E997A6482B5cA2208124b067f1a8F
  Saved MgdCompanyL2Sync filesystem: 0x644B8d2A093E997A6482B5cA2208124b067f1a8F
  Deploying MintGoldDustMemoir...
  MintGoldDustMemoir implementation: 0x19D43f70Ed6C0B4b7A6cF4259A5fA054D3979f86
  TransparentUpgradeableProxy constructor arguments:
  0x00000000000000000000000019d43f70ed6c0b4b7a6cf4259a5fa054d3979f86000000000000000000000000644b8d2a093e997a6482b5ca2208124b067f1a8f00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000
  TransparentUpgradeableProxy deployed: 0x06feE838AC83ED75CC1204aC9610931Ea845Bcd8
  Creating a new record at deployments/base/MintGoldDustMemoir
  Saved MintGoldDustMemoir filesystem: 0x06feE838AC83ED75CC1204aC9610931Ea845Bcd8
  Deploying Mgd721L2Voucher...
  Mgd721L2Voucher implementation: 0xf05D3b74Fb49b58174828cB2be6ef32700542537
  TransparentUpgradeableProxy constructor arguments:
  0x000000000000000000000000f05d3b74fb49b58174828cb2be6ef32700542537000000000000000000000000644b8d2a093e997a6482b5ca2208124b067f1a8f00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000084f8c8765e000000000000000000000000644b8d2a093e997a6482b5ca2208124b067f1a8f000000000000000000000000a2cb07bb0dee0c1f89de033409e88d1c1b35c3e40000000000000000000000004b0dc0900dde9d4f15115bee56554857ae0becb0000000000000000000000000420000000000000000000000000000000000000700000000000000000000000000000000000000000000000000000000
  TransparentUpgradeableProxy deployed: 0x94A2CE42039963664FDd42e869D66cc2021c0c91
  Creating a new record at deployments/base/Mgd721L2Voucher
  Saved Mgd721L2Voucher filesystem: 0x94A2CE42039963664FDd42e869D66cc2021c0c91
  Deploying Mgd1155L2Voucher...
  Mgd1155L2Voucher implementation: 0xa6dbC7D2159AcDa3f3c30f3D0C23b93ceb8aaEcC
  TransparentUpgradeableProxy constructor arguments:
  0x000000000000000000000000a6dbc7d2159acda3f3c30f3d0c23b93ceb8aaecc000000000000000000000000644b8d2a093e997a6482b5ca2208124b067f1a8f00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000084f8c8765e000000000000000000000000644b8d2a093e997a6482b5ca2208124b067f1a8f000000000000000000000000a2cb07bb0dee0c1f89de033409e88d1c1b35c3e400000000000000000000000047356c2efdf0ea13ef48ecae9651d6bb8a524dd9000000000000000000000000420000000000000000000000000000000000000700000000000000000000000000000000000000000000000000000000
  TransparentUpgradeableProxy deployed: 0x1a8149A8b510307868907EF7b80E4B5324c2fD55
  Creating a new record at deployments/base/Mgd1155L2Voucher
  Saved Mgd1155L2Voucher filesystem: 0x1a8149A8b510307868907EF7b80E4B5324c2fD55
  Deploying MintGoldDustSetPrice...
  MintGoldDustSetPrice implementation: 0xB377d167CD0D67638d4098d8a51047ec809CDcD2
  TransparentUpgradeableProxy constructor arguments:
  0x000000000000000000000000b377d167cd0d67638d4098d8a51047ec809cdcd2000000000000000000000000644b8d2a093e997a6482b5ca2208124b067f1a8f00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000064ef3790db000000000000000000000000644b8d2a093e997a6482b5ca2208124b067f1a8f00000000000000000000000094a2ce42039963664fdd42e869d66cc2021c0c910000000000000000000000001a8149a8b510307868907ef7b80e4b5324c2fd5500000000000000000000000000000000000000000000000000000000
  TransparentUpgradeableProxy deployed: 0x6d169643b0314ABD4b902ed306155d296A0dA0bC
  Creating a new record at deployments/base/MintGoldDustSetPrice
  Saved MintGoldDustSetPrice filesystem: 0x6d169643b0314ABD4b902ed306155d296A0dA0bC
  Deploying MintGoldDustMarketplaceAuction...
  MintGoldDustMarketplaceAuction implementation: 0xC4b44988F09A018E5744B2c04E35025886AA7f42
  TransparentUpgradeableProxy constructor arguments:
  0x000000000000000000000000c4b44988f09a018e5744b2c04e35025886aa7f42000000000000000000000000644b8d2a093e997a6482b5ca2208124b067f1a8f00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000064ef3790db000000000000000000000000644b8d2a093e997a6482b5ca2208124b067f1a8f00000000000000000000000094a2ce42039963664fdd42e869d66cc2021c0c910000000000000000000000001a8149a8b510307868907ef7b80e4b5324c2fd5500000000000000000000000000000000000000000000000000000000
  TransparentUpgradeableProxy deployed: 0xBD47D4EF6995E62e6fa6f64B2d7903b503e66940
  Creating a new record at deployments/base/MintGoldDustMarketplaceAuction
  Saved MintGoldDustMarketplaceAuction filesystem: 0xBD47D4EF6995E62e6fa6f64B2d7903b503e66940

# 5.- run script-04 on Base: we do configurations
forge script --via-ir --rpc-url $RPC_BASE --private-key $PKEY --slow --verify --etherscan-api-key $KEY_ETHERSCAN_BASE --broadcast script/foundry/production/04_GlobalDeployerScript.s.sol

== Logs ==
  Done! setting `messenger` in MgdCompanyL2Sync.
  Done! setting `crossDomainMGDCompany` in MgdCompanyL2Sync!
  Done! setting `publicKey` in MgdCompanyL2Sync!
  Done! setting `MintGoldDustSetPrice` in mgd721Voucher!
  Done! setting `MintGoldDustMarketplaceAuction` in mgd721Voucher!
  Done! setting `MintGoldDustSetPrice` in mgd1155Voucher!
  Done! setting `MintGoldDustMarketplaceAuction` in mgd1155Voucher!
  Done! setting `MintGoldDustMarketplace` in mgdSetPrice!
  Done! setting `MintGoldDustMarketplace` in mgdAuction!

# 6.- Via Safe Tx, perform configuration on mainnet using json script on MAINNET.
 - set crossdomain company in company contract
 - set the escrow contract in 721
 - set the escrow contract in 1155
 - set voucher721 contract in escrow
 - set voucher1155 contract in escrow

https://etherscan.io/tx/0xd8bb11dae0989c47d46ed8ffc24bc9c08e8c515f807d8b1d7e0eef447fbcfd10